<!DOCTYPE html>
<html>
<head>

  <title>counter</title>

  <meta charset=utf-8>

  <script src=jquery.js></script>

  <link rel=stylesheet href="style.css" media=screen />

<script>
$(document).ready(function(){

  function crunch() {
    worker.postMessage( $('#text').html().split(/[\n ]+/) );
  }

  $('#crunch').click(crunch, function(wtf){ console.log(wtf) } );

  var worker = new Worker('counter.js');

  worker.addEventListener('message', function(e) {
    $.each(e.data, function(word, count){
      $('#counts tbody').append('<tr><td>'+count+'</td><td>'+word+'</td></tr>');
    });
    //$('#counts').html( JSON.stringify(e.data ), null, 2 ) ;
  }, false);

})
</script>

</head>

<body>

<header>
<button id=crunch>count words</button>

<output id="result"></output>

</header>

<div id=wrapper>
<div id=text>

 
1. Evaṃ me sutaṃ: ekaṃ samayaṃ bhagavā sāvatthiyaṃ viharati jetavane anāthapiṇḍikassa ārāme. Tatra kho bhagavā bhikkhu āmantesi:
Bhikkhavoti. Bhadanteti te bhikkhū bhagavato paccassosuṃ. Bhagavā etadavoca:
Pañcimāni bhikkhave sekhabalāni. Katamāni pañca: saddhābalaṃ hiribalaṃ1 ottappabalaṃ viriyabalaṃ 2: paññābalaṃ. Imāni kho bhikkhave pañcasekhabalāni.
Tasmātiha bhikkhave evaṃ sikkhitabbaṃ: "saddhābalena samannāgatā bhavissāma sekhabalena, hiribalena samannāgatā bhavissāma sekhabalena, ottappabalena samannāgatā bhavissāma sekhabalena, viriyabalena samannāgatā bhavissāma sekhabalena, paññābalena samannāgatā bhavissāma sekhabalenā"ti. Evaṃhi vo bhikkhave sikkhitabbanti. *
 
5. 1. 1. 2
(Sekhabalavitthatasuttaṃ)

</div>
<pre id=xcounts></pre>
<table id=counts>
<thead><tr><th>count</th><th>word</th></tr><thead>
<tbody><tbody>
</table>
</div><!-- #wrapper -->

</body>

</html>

